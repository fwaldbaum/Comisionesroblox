<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comisión Figura Hombre</title>

    <style>
        body { font-family: Arial; background: #f2f2f7; text-align: center; padding: 20px; }
        img { width: 260px; border-radius: 15px; }

        .btn {
            padding: 12px;
            background: #0078ff;
            color: white;
            border-radius: 10px;
            width: 220px;
            border: none;
            cursor: pointer;
            margin-top: 15px;
        }

        .box {
            background: white;
            padding: 20px;
            border-radius: 15px;
            width: 330px;
            margin: 20px auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        input {
            width: 95%;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #aaa;
            margin-bottom: 10px;
        }

        .hidden { display: none; }

        /* ADMIN */
        #adminPanel { margin-top: 40px; }
        #ordersList {
            background:white;
            padding:20px;
            border-radius:12px;
            margin-top:20px;
        }
        .order {
            padding:10px;
            border-bottom:1px solid #ccc;
            text-align:left;
        }
    </style>
</head>
<body>

    <h1>Comisión Figura Hombre</h1>
    <img src="hombre.png">

    <button class="btn" onclick="buy()">Comprar ahora</button>

    <div id="tipBox" class="box hidden">
        <h2>¿Deseas comprar propina?</h2>
        <button class="btn" onclick="buyTip()">Sí</button>
        <button class="btn" onclick="showClaim()">No</button>
    </div>

    <div id="claimBox" class="box hidden">
        <h2>Claim your order</h2>

        <input id="userPurchased" placeholder="Usuario con el que compraste">
        <input id="userToDraw" placeholder="Usuario que quieres que haga tu comisión">
        <input id="mail" placeholder="Tu email">

        <button class="btn" onclick="sendClaim()">Enviar</button>

        <br><br>
        <a href="https://discord.gg/Bby3hWZUYV">
            <button class="btn" style="background:#5865F2">Support</button>
        </a>
    </div>

    <!-- ADMIN PANEL -->
    <div id="adminPanel" class="box">
        <h2>Admin Panel</h2>
        <input id="adminPass" type="password" placeholder="Contraseña (1010)">
        <button class="btn" onclick="loginAdmin()">Entrar</button>

        <div id="ordersList" class="hidden"></div>
    </div>

<script>
/* ---------------- COMPRA ---------------- */

function buy() {
    location.href = "https://www.roblox.com/es/game-pass/1615243033/Comisi-n-hombre-50-OFF";

    setTimeout(() => {
        document.getElementById("tipBox").classList.remove("hidden");
    }, 1500);
}

function buyTip() {
    location.href = "https://www.roblox.com/es/game-pass/1592675344/Tip";
    setTimeout(showClaim, 1500);
}

/* ---------------- CLAIM YOUR ORDER ---------------- */

function showClaim() {
    document.getElementById("tipBox").classList.add("hidden");
    document.getElementById("claimBox").classList.remove("hidden");
}

function sendClaim() {

    let purchased = document.getElementById("userPurchased").value;
    let draw = document.getElementById("userToDraw").value;
    let mail = document.getElementById("mail").value;

    if (!purchased || !draw || !mail) {
        alert("Completa todos los campos.");
        return;
    }

    let order = {
        purchased,
        draw,
        mail,
        date: new Date().toLocaleString()
    };

    let all = JSON.parse(localStorage.getItem("orders_hombre") || "[]");
    all.push(order);
    localStorage.setItem("orders_hombre", JSON.stringify(all));

    /* ------ ENVIAR A DISCORD WEBHOOK ------ */

    let webhook = "https://discord.com/api/webhooks/1446569276768129105/2axI5c4jfCx8GQGrqpQCnxneKvHslnN5qZZI7Dgxjn16-GE-VgAAdu45xA7wx7HCsnpc";

    fetch(webhook, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            content: `@1446574262159671366\nNueva orden de comisión:\n\nUsuario comprador: **${purchased}**\nUsuario para comisión: **${draw}**\nMail: **${mail}**`
        })
    });

    alert("¡Orden enviada!");
    location.href = "index.html";
}

/* ---------------- ADMIN PANEL ---------------- */

function loginAdmin() {
    let pass = document.getElementById("adminPass").value;

    if (pass !== "1010") {
        alert("Contraseña incorrecta.");
        return;
    }

    let ordersDiv = document.getElementById("ordersList");
    ordersDiv.classList.remove("hidden");

    let orders = JSON.parse(localStorage.getItem("orders_hombre") || "[]");

    ordersDiv.innerHTML = "<h3>Órdenes recibidas:</h3>";

    orders.forEach(o => {
        ordersDiv.innerHTML += `
            <div class="order">
                <strong>Compró:</strong> ${o.purchased}<br>
                <strong>Comisión para:</strong> ${o.draw}<br>
                <strong>Mail:</strong> ${o.mail}<br>
                <small>${o.date}</small>
            </div>
        `;
    });
}
</script>

</body>
</html>
